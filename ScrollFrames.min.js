class ScrollFrames{constructor(e,t={}){this.item="string"==typeof e?document.querySelector(e):e,e===window?(this.frames=t,this.frames.duration||(this.frames.duration=1200),this.frames.ease||(this.frames.ease=e=>Math.min(1,1.001-Math.pow(2,-10*e))),this.frames.multiply||(this.frames.multiply=1),this.scrollOffset=0,this.scrollTimeout,window.addEventListener("wheel",(e=>{e.preventDefault();let t=e.deltaY>0?document.body.scrollHeight-window.scrollY:-window.scrollY;this.scrollOffset+=e.deltaY*this.frames.multiply,Math.abs(t)<Math.abs(this.scrollOffset)&&(this.scrollOffset=t),clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((()=>this.scrollOffset=0),100),this.scrollToBottom(this.scrollOffset)}),{passive:!1})):(this.item.classList.contains("ScrollFrames")||this.item.classList.add("ScrollFrames"),this.index=0,this.frames=this.framesToObject(t),this.framesKeys=Object.keys(this.frames),this.totalFrames=this.framesKeys.length-1,this.setFramePosition(),window.addEventListener("scroll",(()=>this.setFramePosition())),window.addEventListener("resize",(()=>{new Promise(((e,t)=>{document.querySelectorAll(".ScrollFrames").forEach((e=>e.removeAttribute("style"))),e(),t()})).then((e=>{this.setFramePosition()}),(e=>{alert("An unexpected error occured. Please reload the page.")}))})))}framesToObject(e){let t={};for(let s in e)t[s]=this.stylesToObject(e[s]);return t}stylesToObject(e){let t={},s=e.split(";");s.filter((e=>""!=e));for(let e of s){let s=e.split(":");2==s.length&&(t[s[0].trim()]=s[1].trim())}return t}percentsCompleted(){let e=this.scrollPosition();return e<this.framesKeys[this.index-1]?0:e>this.framesKeys[this.index]?100:Number((e-this.framesKeys[this.index-1])/(this.framesKeys[this.index]-this.framesKeys[this.index-1])*100)}updateIndex(){let e=this.scrollPosition();for(let t=0;t<=this.totalFrames;t++){if(e<=this.framesKeys[0]){this.index=0;break}if(e>this.framesKeys[t-1]&&e<=this.framesKeys[t]){this.index=t;break}this.index=this.totalFrames+1}}scrollPosition(){return window.scrollY+window.innerHeight}setFramePosition(){if(this.updateIndex(),0==this.index||this.index>this.totalFrames){let e=this.frames[this.framesKeys[0==this.index?0:this.totalFrames]];for(let t in e)this.item.style[t]=e[t]}else{let e=this.frames[this.framesKeys[this.index-1]],t=this.frames[this.framesKeys[this.index]];for(let s in e){let i=/(-?\d\.\d)|-?\d+/g;if(s in t&&i.test(e[s])){let r=t[s].match(i),o=0,l=e[s].replace(i,(e=>{let t=Number(e)+(r[o]-e)*this.percentsCompleted()/100;return o++,t.toFixed(2)}));this.item.style[s]=l}else this.item.style[s]=e[s]}}}scrollToBottom(e){const t=window.scrollY,s=t+e,i=this.frames.duration,r=this.frames.ease,o=performance.now();window.requestAnimationFrame((function e(){const l=performance.now()-o,a=Math.min(l/i,1),h=r(a),n=t+(s-t)*h;window.scrollTo(0,n),a<1&&window.requestAnimationFrame(e)}))}}
